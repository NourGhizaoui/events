<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Dashboard Organisateur</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f5f7fa;
        }
        .card-stats {
            transition: 0.3s;
        }
        .card-stats:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .table thead {
            background: #343a40;
            color: white;
        }
        .btn-create {
            background: #0d6efd;
            color: white;
        }
        .btn-create:hover {
            background: #084298;
        }
    </style>
</head>

<body>

<div class="container py-5">
	<div class="d-flex justify-content-end p-3">
	    <a href="/auth/logout" class="btn btn-danger">ğŸšª Logout </a>
	</div>

    <h1 class="text-center fw-bold mb-4">ğŸ“Š Dashboard Organisateur</h1>

    <!-- Stats Cards -->
    <div class="row g-4 mb-5">

        <div class="col-md-3">
            <div class="card card-stats p-3">
                <h5>Total Events</h5>
                <h2 class="text-primary fw-bold" th:text="${totalEvents}"></h2>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card card-stats p-3">
                <h5>Pending Events</h5>
                <h2 class="text-warning fw-bold" th:text="${pendingEvents}"></h2>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card card-stats p-3">
                <h5>Approved Events</h5>
                <h2 class="text-success fw-bold" th:text="${approvedEvents}"></h2>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card card-stats p-3">
                <h5>Past Events</h5>
                <h2 class="text-danger fw-bold" th:text="${pastEvents}"></h2>
            </div>
        </div>

    </div>

    <!-- Events Section -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="fw-bold">ğŸ“… Liste des Ã©vÃ©nements</h2>
        <a href="/organisator/event/new" class="btn btn-create">+ CrÃ©er un Ã©vÃ©nement</a>
    </div>

    <div class="card p-3 shadow-sm">
        <table class="table table-striped table-bordered text-center">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Date</th>
                    <th>Location</th>
                    <th>Capacity</th>
					<th>Category</th> <!-- Nouvelle colonne -->

                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="event : ${events}">
                    <td th:text="${event.id}"></td>
                    <td th:text="${event.title}"></td>
                    <td th:text="${event.description}"></td>
                    <td th:text="${#temporals.format(event.eventDate, 'yyyy-MM-dd HH:mm')}"></td>
                    <td th:text="${event.location}"></td>
                    <td th:text="${event.capacity}"></td>
					<td th:text="${event.category.name}"></td> <!-- Affichage de la catÃ©gorie -->

                    <td>
						<span th:text="${event.status}"
						      class="badge"
						      th:classappend="${event.status} == 'APPROVED' ? ' bg-success' :
						                      (event.status == 'PENDING' ? ' bg-warning text-dark' : ' bg-secondary')">
						</span>

                    </td>

                    <td>
                        <a th:href="@{/organisator/event/edit/{id}(id=${event.id})}"
                           class="btn btn-sm btn-warning me-2">âœ Edit</a>

                        <form th:action="@{/organisator/event/delete/{id}(id=${event.id})}"
                              method="post" style="display:inline">
                            <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ Delete</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
